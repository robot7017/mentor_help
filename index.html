<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HKUST(GZ) ÂØºÂ∏àÂõæÈâ¥</title>
    
    <!-- üöÄ ÂõΩÂÜÖÁâπ‰æõÂä†ÈÄüÁâà (Staticfile CDN) -->
    <!-- 1. Tailwind CSS (Ê†∑ÂºèÂ∫ì) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. React Ê†∏ÂøÉ (ÂõΩÂÜÖÊ∫êÔºåÈò≤ÁôΩÂ±è) -->
    <script crossorigin src="https://cdn.staticfile.net/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdn.staticfile.net/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- 3. Babel ÁºñËØëÂô® (ÂõΩÂÜÖÊ∫êÔºåËß£ÊûêJSX) -->
    <script src="https://cdn.staticfile.net/babel-standalone/7.22.20/babel.min.js"></script>

    <style>
        /* ÊâìÂç∞Ê†∑Âºè‰ºòÂåñ */
        @media print {
            @page { margin: 0; }
            body { -webkit-print-color-adjust: exact; }
            .no-print { display: none !important; }
        }
        .card-hover:hover { transform: translateY(-5px); }
        
        /* Âä†ËΩΩÂä®ÁîªÂÆπÂô® */
        #loading { 
            position: fixed; 
            inset: 0; 
            background: #f3f4f6; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 50; 
            transition: opacity 0.5s;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">

    <!-- È¢ÑÂä†ËΩΩÊèêÁ§∫ (Èò≤Ê≠¢ÁΩëÈÄüÊÖ¢Êó∂ÁôΩÂ±è) -->
    <div id="loading">
        <div class="text-center">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"></div>
            <p class="text-gray-600 font-medium">Ê≠£Âú®Âä†ËΩΩÂØºÂ∏àÊï∞ÊçÆ...</p>
            <p class="text-gray-400 text-xs mt-2">Powered by HKUST(GZ)</p>
        </div>
    </div>

    <div id="root"></div>

    <script type="text/babel">
        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÈöêËóè Loading Âä®Áîª
        window.onload = () => {
            const loader = document.getElementById('loading');
            if(loader) {
                loader.style.opacity = '0';
                setTimeout(() => loader.style.display = 'none', 500);
            }
        };

        const { useState, useEffect } = React;

        // --- ÁÆÄÊòìÂõæÊ†áÂ∫ì (Êó†ÈúÄÈ¢ùÂ§ñ‰∏ãËΩΩÔºåÁõ¥Êé•ËøêË°å) ---
        const Icon = ({ path, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );
        // ÂõæÊ†áÂÆö‰πâ
        const Icons = {
            Sparkles: (p) => <Icon {...p} path={<><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></>} />,
            BookOpen: (p) => <Icon {...p} path={<><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></>} />,
            Gamepad2: (p) => <Icon {...p} path={<><line x1="6" x2="10" y1="12" y2="12"/><line x1="8" x2="8" y1="10" y2="14"/><line x1="15" x2="15.01" y1="13" y2="13"/><line x1="18" x2="18.01" y1="11" y2="11"/><rect width="20" height="12" x="2" y="6" rx="2"/></>} />,
            Globe2: (p) => <Icon {...p} path={<><path d="M21.54 15H17a2 2 0 0 0-2 2v4.54"/><path d="M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"/><path d="M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"/><circle cx="12" cy="12" r="10"/></>} />,
            HeartHandshake: (p) => <Icon {...p} path={<><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/><path d="M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.18 0l2.6 2.6"/></>} />,
            Printer: (p) => <Icon {...p} path={<><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></>} />,
            Settings: (p) => <Icon {...p} path={<><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></>} />,
            Search: (p) => <Icon {...p} path={<><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></>} />,
            X: (p) => <Icon {...p} path={<><path d="M18 6 6 18"/><path d="m6 6 12 12"/></>} />,
            Loader2: (p) => <Icon {...p} className={`${p.className} animate-spin`} path={<><path d="M21 12a9 9 0 1 1-6.219-8.56"/></>} />,
            Award: (p) => <Icon {...p} path={<><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></>} />,
            User: (p) => <Icon {...p} path={<><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></>} />,
            Star: (p) => <Icon {...p} path={<><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></>} />,
            Hash: (p) => <Icon {...p} path={<><line x1="4" x2="20" y1="9" y2="9"/><line x1="4" x2="20" y1="15" y2="15"/><line x1="10" x2="8" y1="3" y2="21"/><line x1="16" x2="14" y1="3" y2="21"/></>} />,
            MessageCircle: (p) => <Icon {...p} path={<><path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"/></>} />,
            Zap: (p) => <Icon {...p} path={<><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></>} />,
        };

        // --- ‰∏ªÈÄªËæë ---
        const MentorCards = () => {
            const [filter, setFilter] = useState('all');
            const [isPrintMode, setIsPrintMode] = useState(false);
            const [showMatchModal, setShowMatchModal] = useState(false);
            const [matchQuery, setMatchQuery] = useState('');
            const [matchResults, setMatchResults] = useState(null);
            const [isMatching, setIsMatching] = useState(false);
            const [activeIcebreaker, setActiveIcebreaker] = useState(null);
            const [isGeneratingIcebreaker, setIsGeneratingIcebreaker] = useState(null);
            const [showConfig, setShowConfig] = useState(false);
            const [useMockAI, setUseMockAI] = useState(true);
            const [apiProvider, setApiProvider] = useState('deepseek');
            const [customApiKey, setCustomApiKey] = useState('');

            // ÂØºÂ∏àÊï∞ÊçÆ
            const mentors = [
                { id: '50012742', name: 'ÁéãÈ¢êÊóª', grade: 'Â§ß‰∏â', category: 'academic', tags: ['VEXÊú∫Âô®‰∫∫ÂÜ†ÂÜõ', 'ÂÖ®ËÉΩÂ≠¶Èú∏', 'Ë°®ËææÂäõMax'], desc: 'Á°¨Ê†∏ÊäÄÊúØÊµÅ„ÄÇÊõæËé∑VEXÊú∫Âô®‰∫∫Á´ûËµõÂÜ†ÂÜõÔºåÈÄªËæëÊÄùÁª¥ÊûÅÂº∫„ÄÇÊìÖÈïøÂ∞ÜÂ§çÊùÇÊ¶ÇÂøµÁÆÄÂçïÂåñ„ÄÇ', match: 'ÂØπÊú∫Âô®‰∫∫/ÁºñÁ®ãÊÑüÂÖ¥Ë∂£ÔºåÈúÄË¶ÅÁêÜÁßëÊãîÈ´òÊàñÂ≠¶ÊúØÊ¶úÊ†∑„ÄÇ' },
                { id: '50032924', name: 'ÁéãÂ•ïÂòâ', grade: 'Â§ß‰∏Ä', category: 'academic', tags: ['Ê£ãÁ±ªÈ´òÊâã', 'ÈÄªËæëÈ¨ºÊâç', 'Êï∞ÁêÜËΩ¨Êç¢'], desc: 'Á≠ñÁï•‰∏éÊô∫ÊÖßÁöÑÁªìÂêà„ÄÇÁ≤æÈÄöÈí¢Áê¥‰∏éÂêÑÁ±ªÊ£ãÂ±ÄÔºåÊìÖÈïøÁî®‚ÄúÊï∞Â≠¶ËØ≠Ë®Ä‚ÄùËß£ÊûÑ‰∏ñÁïå„ÄÇ', match: 'Êï∞ÁêÜÈÄªËæëËñÑÂº±ÔºåÊàñÂñúÊ¨¢Á≠ñÁï•Ê∏∏Êàè/Ê£ãÁ±ªÁöÑÂ≠¶Áîü„ÄÇ' },
                { id: '50036011', name: 'Ëãè‰Ω≥Èü≥', grade: 'Â§ß‰∏Ä', category: 'academic', tags: ['ÂºïÂØºÂºèÊïôËÇ≤', 'ËÄêÂøÉÂßêÂßê', 'ÂøÉÁêÜÁñèÂØº'], desc: 'ÊìÖÈïø‚ÄúÂºïÂØºÂºèÊïôËÇ≤‚ÄùÔºåÊáÇÂæóÂ∫îÂØπÈùíÊò•ÊúüÂøÉÁêÜ„ÄÇËÉΩÊääÊûØÁá•ÁöÑÊñπÁ®ãËÆ≤ÂæóÁîüÂä®ÊúâË∂£„ÄÇ', match: 'Âü∫Á°ÄËæÉÂº±ÈúÄË¶ÅËÄêÂøÉÂºïÂØºÔºåÊàñÂ§Ñ‰∫éÂèõÈÄÜÊúüÁöÑÂ≠¶Áîü„ÄÇ' },
                { id: '50027539', name: 'ÂàòÁßãÊÇ¶', grade: 'Mentor', category: 'interest', tags: ['‰πêÈòüËææ‰∫∫', 'Êñá‰Ωì‰∏§ÂºÄËä±', 'ÈÄÜË¢≠ÁªèÈ™å'], desc: 'ÊúâË∂£ÁöÑÁÅµÈ≠ÇÔºÅÁé©‰πêÈòü„ÄÅÁîªÁîª„ÄÅÊâìÁêÉÊ†∑Ê†∑Ë°å„ÄÇÊúâ‚ÄúÈÄÜË¢≠‚ÄùÁªèÈ™åÔºåÈùûÂ∏∏ÊáÇÂêéËøõÁîüÁöÑÂøÉÊÉÖ„ÄÇ', match: 'Áº∫‰πèËá™‰ø°„ÄÅÊàêÁª©ÊöÇÊó∂ËêΩÂêéÔºåÊàñÁÉ≠Áà±Èü≥‰πêËâ∫ÊúØÁöÑÂ≠¶Áîü„ÄÇ' },
                { id: '50027917', name: 'ÁéãË®ÄÂ§©', grade: 'Mentor', category: 'interest', tags: ['ÁîüÊ¥ªËâ∫ÊúØÂÆ∂', 'È´òÊÉÖÂïÜ', 'ÁêÜÊÄßÂàÜÊûê'], desc: 'ÁÉπÈ•™„ÄÅË∑ÜÊã≥ÈÅì„ÄÅÊâãÂ∑•ÂÖ®ËÉΩ„ÄÇÊìÖÈïøÂÄæÂê¨ÔºåÊïô‰Ω†Áî®ÁêÜÊÄßÁöÑÊñπÂºèËß£ÂÜ≥ÊÉÖÁª™ÈóÆÈ¢ò„ÄÇ', match: 'ÊÉÖÁª™Ê≥¢Âä®ËæÉÂ§ßÔºåÊàñÂØπÂ§öÂΩ©ÁîüÊ¥ªÊäÄËÉΩÊÑüÂÖ¥Ë∂£ÁöÑÂ≠¶Áîü„ÄÇ' },
                { id: '500125799', name: 'Áº™Èî°ÁÜô', grade: 'Mentor', category: 'interest', tags: ['Á§æ‰∫§Ëææ‰∫∫', 'ËøêÂä®ÂÅ•Â∞Ü', 'Ê∏∏Êàè‰ºô‰º¥'], desc: 'Â§ñÂêëÂºÄÊúóÁöÑSocial King„ÄÇËøêÂä®‰∏éÊ∏∏ÊàèÂ•ΩÊâãÔºåËÉΩÂàÜ‰∫´‰∏∞ÂØåÁöÑÊàêÈïø‰∏éÁîüÊ¥ªÊô∫ÊÖß„ÄÇ', match: 'ÊÄßÊ†ºÂÜÖÂêëÈúÄË¶ÅÂ∏¶Âä®ÔºåÊàñÂñúÁà±ËøêÂä®ÂíåÊ∏∏ÊàèÁöÑÁî∑Áîü„ÄÇ' },
                { id: 'unknown-1', name: 'ÈùíÊò•', grade: 'Â§ß‰∫å', category: 'global', tags: ['Èò≥ÂÖâÊ≠£ËÉΩÈáè', 'Ëã±ÊñáÂº∫', 'Ê≠åÂî±Ëææ‰∫∫'], desc: '‰∫∫Â¶ÇÂÖ∂ÂêçÔºåÂÖÖÊª°Ê¥ªÂäõ„ÄÇËã±ÊñáÊµÅÂà©ÔºåÁÉ≠Áà±Âî±Ê≠åÔºåËÉΩÂ∏¶Êù•Êª°Êª°ÁöÑÊ≠£ËÉΩÈáè„ÄÇ', match: 'ÊÉ≥ÁªÉÂè£ËØ≠„ÄÅÈúÄË¶ÅÊ¶úÊ†∑ÊøÄÂä±ÁöÑÊ¥ªÊ≥ºÂ≠¶Áîü„ÄÇ' },
                { id: '50028167', name: 'Haardhik (ÂàòÁà±‰ªÅ)', grade: 'Mentor', category: 'global', tags: ['ÂõΩÈôÖÂèã‰∫∫', 'ÊïôËÇ≤ÁêÜÊÉ≥', 'Ë∑®ÊñáÂåñ‰∫§ÊµÅ'], desc: 'Êù•Ëá™Âç∞Â∫¶ÁöÑÁÉ≠ÊÉÖÂêåÂ≠¶ÔºåÊÄÄÊè£ÊïôËÇ≤ÁêÜÊÉ≥„ÄÇÂê¨ÂäõË°®Ëææ‰ºòÁßÄÔºåÂ∏¶‰Ω†‰ΩìÈ™åË∑®ÊñáÂåñ‰∫§ÊµÅ„ÄÇ', match: 'Ëã±ËØ≠Âü∫Á°ÄËæÉÂ•ΩÔºåÂØπ‰∏çÂêåÊñáÂåñÂÖÖÊª°Â•ΩÂ•áÁöÑÂ≠¶Áîü„ÄÇ' },
                { id: '50036956', name: 'Saadat', grade: 'Â§ß‰∫å', category: 'global', tags: ['ÂÖ®Ëã±ÊïôÂ≠¶', 'ÁªèÈ™å‰∏∞ÂØå', '‰ºòÁßÄÊ†áÊùÜ'], desc: 'ÁªºÂêàÁ¥†Ë¥®ÊûÅ‰Ω≥ÁöÑÂõΩÈôÖÁîüÔºåÊïôÂ≠¶ÁªèÈ™å‰∏∞ÂØåÔºåÊòØËøΩÊ±ÇÂçìË∂äÁöÑÂ•ΩÊ¶úÊ†∑„ÄÇ', match: 'ÈúÄË¶ÅÊ≤âÊµ∏ÂºèÂÖ®Ëã±ÁéØÂ¢É„ÄÅËøΩÊ±ÇÂçìË∂äÁöÑÂ≠¶Áîü„ÄÇ' },
                { id: '50012560', name: '‰æØ‰ºØÂíè', grade: 'Mentor', category: 'global', tags: ['ÂÖ®Ëã±ÊéàËØæ', 'ÂÆûÊàòÊ¥æ', 'ÂÆ∂ÊïôÁªèÈ™å'], desc: 'Êã•ÊúâÊâéÂÆûÁöÑÂÆ∂ÊïôÂÆûÊàòÁªèÈ™åÔºåÂÖ∑Â§áÂÖ®Ëã±ÊñáÊéàËØæÁöÑÁ°¨ÂÆûÂäõ„ÄÇ', match: 'ÁõÆÊ†áÊòéÁ°ÆÔºåÊÉ≥ÂàáÂÆûÊèêÂçáËã±ËØ≠ËÉΩÂäõÁöÑÂêåÂ≠¶„ÄÇ' },
                { id: '50028181', name: 'Jing Xin Yuu', grade: 'Mentor', category: 'global', tags: ['ÂèåËØ≠ÊµÅÂà©', 'È©¨Êù•Ë•ø‰∫ö', 'Ê≤üÈÄöÊó†Á¢ç'], desc: '‰∏≠Ëã±ÂèåËØ≠ÂàáÊç¢Ëá™Â¶ÇÔºåÊ≤üÈÄöÈõ∂ÈöúÁ¢çÁöÑÂõΩÈôÖ‰ºô‰º¥„ÄÇ', match: 'ÈÄÇÂ∫îÂèåËØ≠ÊïôÂ≠¶ÁéØÂ¢ÉÔºåÂñúÊ¨¢Â§öÂÖÉÊñáÂåñÁöÑÂ≠¶Áîü„ÄÇ' },
                { id: '50033370', name: 'Ë¥æÊô∫Áøî', grade: 'Mentor', category: 'support', tags: ['ÁúüËØöÈô™‰º¥', '‰∫∫ÈôÖ‰∫§ÂæÄ', 'ÂÄæÂê¨ËÄÖ'], desc: 'ËôΩÁÑ∂Êúâ‰∫õÂÜÖÊïõÔºå‰ΩÜÂÜÖÂøÉÊ∏©Êöñ„ÄÇ‰ªñÊÑøÊÑèÂÅö‰Ω†ÊúÄË∏èÂÆûÁöÑÂÄæÂê¨ËÄÖÂíåÁîüÊ¥ª‰ºô‰º¥„ÄÇ', match: 'ÊÑüÂà∞Â≠§Áã¨ÔºåÈúÄË¶ÅÂ§ßÂì•Âì•Èô™‰º¥ËÅäÂ§©ËÄåÈùûÈ´òÂéãË°•‰π†ÁöÑÂ≠¶Áîü„ÄÇ' }
            ];

            // Ê†∑ÂºèËæÖÂä©
            const getCategoryStyle = (cat) => {
                switch (cat) {
                    case 'academic': return { bg: 'bg-blue-50', border: 'border-blue-200', header: 'bg-gradient-to-r from-blue-500 to-indigo-600', text: 'text-blue-800', tag: 'bg-blue-100 text-blue-700', icon: <Icons.BookOpen className="w-5 h-5 text-white" />, label: 'Â≠¶ÊúØ & ÈÄªËæë' };
                    case 'interest': return { bg: 'bg-orange-50', border: 'border-orange-200', header: 'bg-gradient-to-r from-orange-400 to-pink-500', text: 'text-orange-800', tag: 'bg-orange-100 text-orange-700', icon: <Icons.Gamepad2 className="w-5 h-5 text-white" />, label: 'ÂÖ¥Ë∂£ & ÊäÄËÉΩ' };
                    case 'global': return { bg: 'bg-teal-50', border: 'border-teal-200', header: 'bg-gradient-to-r from-teal-400 to-emerald-600', text: 'text-teal-800', tag: 'bg-teal-100 text-teal-700', icon: <Icons.Globe2 className="w-5 h-5 text-white" />, label: 'ÂõΩÈôÖ & ËØ≠Ë®Ä' };
                    case 'support': return { bg: 'bg-rose-50', border: 'border-rose-200', header: 'bg-gradient-to-r from-rose-400 to-pink-600', text: 'text-rose-800', tag: 'bg-rose-100 text-rose-700', icon: <Icons.HeartHandshake className="w-5 h-5 text-white" />, label: 'Èô™‰º¥ & ÊîØÊåÅ' };
                    default: return {};
                }
            };

            // AI Ê®°ÊãüÈÄªËæë
            const getMockResponse = (type, queryOrMentor) => {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        if (type === 'match') {
                            resolve(JSON.stringify([
                                { id: '50027539', reason: "ËØ•ÂØºÂ∏àÊúâÈÄÜË¢≠ÁªèÈ™å‰∏îÁÉ≠Áà±Ê∏∏ÊàèÂíåÈü≥‰πêÔºåÈùûÂ∏∏ÈÄÇÂêàÁêÜËß£‰Ω†ÁöÑÂÖ¥Ë∂£Âπ∂Âª∫Á´ãËá™‰ø°„ÄÇ" },
                                { id: '500125799', reason: "Á§æ‰∫§Ëææ‰∫∫Â±ûÊÄßÂèØ‰ª•Â∏¶Âä®‰Ω†ÁöÑÊÄßÊ†ºÔºåÂêåÊó∂‰Ωú‰∏∫Ê∏∏ÊàèÂ•ΩÊâãÔºå‰Ω†‰ª¨‰ºöÊúâÂæàÂ§öÂÖ±ÂêåËØ≠Ë®Ä„ÄÇ" },
                                { id: 'unknown-1', reason: "Èò≥ÂÖâÂºÄÊúóÁöÑÊÄßÊ†ºËÉΩÊÑüÊüì‰Ω†ÔºåËã±ËØ≠‰ºòÂäø‰πüËÉΩÊΩúÁßªÈªòÂåñÂú∞Â∏ÆÂä©‰Ω†ÁöÑÂ≠¶‰∏ö„ÄÇ" }
                            ]));
                        } else if (type === 'icebreaker') {
                             const tag = queryOrMentor.tags[0] || 'Â≠¶‰π†';
                             resolve(JSON.stringify([
                                `Âê¨ËØ¥‰Ω†ÂØπ${tag}ÂæàÊÑüÂÖ¥Ë∂£ÔºåËÉΩË∑üÊàëËÆ≤ËÆ≤‰Ω†ÊúÄÈöæÂøòÁöÑ‰∏ÄÊ¨°ÁªèÂéÜÂêóÔºü`,
                                "ÊàëÁé∞Âú®ÁöÑÂπ¥Á∫ßÂ¶ÇÊûúÊÉ≥ÂæÄËøôÊñπÈù¢ÂèëÂ±ïÔºå‰Ω†ËßâÂæóÊàëÁé∞Âú®ÊúÄÂ∫îËØ•ÂÅöÁöÑÊòØ‰ªÄ‰πàÔºü",
                                "Âú®Ê∏ØÁßëÂ§ßÔºàÂπøÂ∑ûÔºâÁöÑÁîüÊ¥ªÂíåÊàëÊÉ≥Ë±°‰∏≠Âæà‰∏ç‰∏ÄÊ†∑ÔºåËÉΩÂàÜ‰∫´‰∏Ä‰ª∂‰Ω†ËßâÂæóÊúÄÈÖ∑ÁöÑ‰∫ãÊÉÖÂêóÔºü"
                            ]));
                        }
                    }, 1000);
                });
            };

            const callAI = async (prompt, type, contextData) => {
                // ÈªòËÆ§‰ΩøÁî® Mock Êï∞ÊçÆÔºå‰øùËØÅÂõΩÂÜÖËÆøÈóÆÁ®≥ÂÆö
                if (useMockAI) {
                    const mockRes = await getMockResponse(type, contextData);
                    try { return JSON.parse(mockRes); } catch(e) { return []; }
                }
                
                // Âè™ÊúâÂú®ÊòæÂºèËÆæÁΩÆ‰∫Ü API Key Êó∂ÊâçÂ∞ùËØïË∞ÉÁî®ÁúüÂÆûÊé•Âè£
                if (!customApiKey) {
                    alert("ËØ∑ÂÖàÂú®ËÆæÁΩÆ‰∏≠ËæìÂÖ• API KeyÔºåÊàñÂàáÊç¢ÂõûÊºîÁ§∫Ê®°Âºè„ÄÇ");
                    return null;
                }
                
                // ËøôÈáåÊòØÈ¢ÑÁïôÁªô DeepSeek ÁöÑÊé•Âè£ÔºåÂ¶ÇÊûúÂÆ∂ÈïøÁúüÊúâ KeyÔºå‰πüÂèØ‰ª•Áî®
                alert("ÁΩëÈ°µÁâàÊé®Ëçê‰ΩøÁî®ÈªòËÆ§ÊºîÁ§∫Ê®°Âºè„ÄÇÂ¶ÇÈúÄÊé•ÂÖ• DeepSeekÔºåËØ∑Á°Æ‰øù API ÂÖÅËÆ∏Ë∑®ÂüüË∞ÉÁî®„ÄÇ");
                const mockRes = await getMockResponse(type, contextData);
                return JSON.parse(mockRes);
            };

            const handleAIMatch = async () => {
                if (!matchQuery.trim()) return;
                setIsMatching(true);
                const results = await callAI("", 'match', null);
                if (results) setMatchResults(results);
                setIsMatching(false);
            };

            const handleIcebreaker = async (mentor) => {
                if (activeIcebreaker?.mentorId === mentor.id) {
                    setActiveIcebreaker(null);
                    return;
                }
                setIsGeneratingIcebreaker(mentor.id);
                const questions = await callAI("", 'icebreaker', mentor);
                if (questions) setActiveIcebreaker({ mentorId: mentor.id, questions });
                setIsGeneratingIcebreaker(null);
            };

            const filteredMentors = filter === 'all' ? mentors : mentors.filter(m => m.category === filter);

            return (
                <div className={`font-sans text-gray-800 ${isPrintMode ? 'bg-white' : 'p-4 md:p-8'}`}>
                    
                    {/* ÊéßÂà∂Ê†è */}
                    {!isPrintMode && (
                        <div className="max-w-6xl mx-auto mb-8 bg-white p-4 rounded-xl shadow-sm border border-gray-200 flex flex-wrap items-center justify-between gap-4 sticky top-4 z-40">
                            <div className="flex items-center gap-2">
                                <h1 className="text-xl font-bold text-gray-800 flex items-center gap-2">
                                    <Icons.Sparkles className="text-yellow-500 fill-yellow-500 w-6 h-6" />
                                    HKUST(GZ) ÂØºÂ∏àÂõæÈâ¥
                                </h1>
                                <button onClick={() => setShowConfig(!showConfig)} className="text-gray-400 hover:text-gray-600 p-1">
                                    <Icons.Settings className="w-4 h-4" />
                                </button>
                            </div>
                            
                            <div className="flex flex-wrap gap-2 items-center">
                                <button onClick={() => setShowMatchModal(true)} className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-full text-sm font-bold shadow-md hover:scale-105 transition-transform">
                                    <Icons.Sparkles className="w-3.5 h-3.5" /> AI Êô∫ËÉΩÂåπÈÖç
                                </button>
                                <div className="h-6 w-px bg-gray-300 mx-2 hidden md:block"></div>
                                {['all', 'academic', 'interest', 'global', 'support'].map(f => (
                                    <button key={f} onClick={() => setFilter(f)} className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${filter === f ? 'bg-gray-800 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}>
                                        {f === 'all' ? 'ÂÖ®ÈÉ®' : f === 'academic' ? 'Â≠¶ÊúØ' : f === 'interest' ? 'ÂÖ¥Ë∂£' : f === 'global' ? 'ÂõΩÈôÖ' : 'Èô™‰º¥'}
                                    </button>
                                ))}
                            </div>

                            <button onClick={() => setIsPrintMode(true)} className="flex items-center gap-2 px-4 py-2 bg-white text-indigo-600 border border-indigo-200 rounded-lg hover:bg-indigo-50">
                                <Icons.Printer className="w-4 h-4" /> ÊâìÂç∞
                            </button>
                        </div>
                    )}

                    {/* ÈÖçÁΩÆÂºπÁ™ó */}
                    {showConfig && !isPrintMode && (
                        <div className="max-w-6xl mx-auto mb-6 bg-yellow-50 p-4 rounded-xl border border-yellow-200 text-sm animate-in fade-in slide-in-from-top-2">
                            <h3 className="font-bold text-yellow-800 mb-2 flex items-center gap-2"><Icons.Zap className="w-4 h-4" />ËÆæÁΩÆ</h3>
                            <label className="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" checked={useMockAI} onChange={(e) => setUseMockAI(e.target.checked)} className="w-4 h-4 accent-indigo-600" />
                                <span className="text-gray-700 font-medium">ÊºîÁ§∫Ê®°Âºè (ÈªòËÆ§ÂºÄÂêØÔºåÊó†ÈúÄ API Key)</span>
                            </label>
                        </div>
                    )}

                    {/* AI ÂåπÈÖçÂºπÁ™ó */}
                    {showMatchModal && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
                            <div className="bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                                <div className="bg-gradient-to-r from-purple-600 to-indigo-600 p-6 text-white flex justify-between items-start">
                                    <div>
                                        <h2 className="text-2xl font-bold flex items-center gap-2"><Icons.Sparkles className="text-yellow-300 w-5 h-5" /> AI ÂåπÈÖçÂä©Êâã</h2>
                                        <p className="text-indigo-100 text-sm mt-1">ËæìÂÖ•‰Ω†ÁöÑÊÉÖÂÜµÔºå‰∏∫‰Ω†Êé®ËçêÊúÄ‰Ω≥ÂØºÂ∏à„ÄÇ</p>
                                    </div>
                                    <button onClick={() => setShowMatchModal(false)} className="text-white/80 hover:text-white"><Icons.X className="w-6 h-6" /></button>
                                </div>
                                <div className="p-6 flex-1 overflow-y-auto">
                                    <div className="relative mb-6">
                                        <textarea value={matchQuery} onChange={(e) => setMatchQuery(e.target.value)} placeholder="‰æãÂ¶ÇÔºöÊàëÊúâÁÇπÁ§æÊÅêÔºåÂñúÊ¨¢‰∫åÊ¨°ÂÖÉ..." className="w-full p-4 rounded-xl border-2 border-indigo-100 h-32 text-gray-700 focus:outline-none focus:border-indigo-500" />
                                        <button onClick={handleAIMatch} disabled={isMatching || !matchQuery.trim()} className="absolute bottom-4 right-4 bg-indigo-600 text-white p-2 rounded-lg hover:bg-indigo-700 disabled:bg-gray-300">
                                            {isMatching ? <Icons.Loader2 className="w-5 h-5 animate-spin" /> : <Icons.Search className="w-5 h-5" />}
                                        </button>
                                    </div>
                                    {matchResults && (
                                        <div className="space-y-4">
                                            <h3 className="font-bold text-gray-800 flex items-center gap-2"><Icons.Award className="w-5 h-5 text-indigo-500" /> Êé®ËçêÁªìÊûú</h3>
                                            {matchResults.map((result, idx) => {
                                                const mentor = mentors.find(m => m.id === result.id);
                                                if (!mentor) return null;
                                                return (
                                                    <div key={idx} className="flex gap-4 p-4 rounded-xl border border-gray-100 bg-gray-50">
                                                        <div className="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold shrink-0">{mentor.name[0]}</div>
                                                        <div>
                                                            <div className="font-bold text-gray-800">{mentor.name}</div>
                                                            <p className="text-sm text-purple-700 mt-1">{result.reason}</p>
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* ÊâìÂç∞È°µÂ§¥ */}
                    {isPrintMode && (
                        <div className="fixed top-0 left-0 right-0 bg-gray-800 text-white p-4 flex justify-between items-center z-50 print:hidden shadow-lg">
                            <span className="font-bold text-lg">ÊâìÂç∞È¢ÑËßàÊ®°Âºè</span>
                            <div className="flex gap-4">
                                <button onClick={() => window.print()} className="px-4 py-2 bg-blue-500 rounded-lg hover:bg-blue-600 font-medium">Á°ÆËÆ§ÊâìÂç∞</button>
                                <button onClick={() => setIsPrintMode(false)} className="px-4 py-2 bg-gray-600 rounded-lg hover:bg-gray-500 font-medium">ÈÄÄÂá∫</button>
                            </div>
                        </div>
                    )}

                    {/* Âç°ÁâáÁΩëÊ†º */}
                    <div className={`max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 ${isPrintMode ? 'pt-20 print:pt-0' : ''}`}>
                        {filteredMentors.map((mentor) => {
                            const style = getCategoryStyle(mentor.category);
                            const isGenerating = isGeneratingIcebreaker === mentor.id;
                            const showIcebreaker = activeIcebreaker?.mentorId === mentor.id;

                            return (
                                <div key={mentor.id} className={`card-hover relative flex flex-col h-[450px] rounded-2xl overflow-hidden shadow-lg bg-white border-2 ${style.border} print:break-inside-avoid print:shadow-none`}>
                                    <div className={`${style.header} p-4 text-white relative`}>
                                        <div className="flex justify-between items-start">
                                            <div>
                                                <h2 className="text-2xl font-bold">{mentor.name}</h2>
                                                <p className="text-white/90 text-sm flex items-center gap-1"><Icons.Award className="w-3 h-3" /> {mentor.grade}</p>
                                            </div>
                                            <div className="bg-white/20 p-2 rounded-lg backdrop-blur-sm">{style.icon}</div>
                                        </div>
                                        <div className="absolute -bottom-3 right-4 bg-white text-xs font-bold px-3 py-1 rounded-full text-gray-600 shadow-sm border border-gray-100">{style.label}</div>
                                    </div>

                                    <div className="flex-1 p-5 pt-6 flex flex-col gap-4 relative">
                                        <div className="flex items-center justify-between text-xs text-gray-400 font-mono">
                                            <div className="flex items-center gap-1"><Icons.User className="w-3 h-3" /> ID: {mentor.id}</div>
                                            {!isPrintMode && (
                                                <button onClick={() => handleIcebreaker(mentor)} className={`flex items-center gap-1 px-2 py-1 rounded-md transition-colors text-xs font-bold ${showIcebreaker ? 'bg-indigo-100 text-indigo-700' : 'bg-gray-100 text-gray-600 hover:bg-indigo-50'}`}>
                                                    {isGenerating ? <Icons.Loader2 className="w-3 h-3 animate-spin" /> : <Icons.MessageCircle className="w-3 h-3" />}
                                                    {showIcebreaker ? 'ÂÖ≥Èó≠' : 'Á†¥ÂÜ∞'}
                                                </button>
                                            )}
                                        </div>

                                        {showIcebreaker && activeIcebreaker && (
                                            <div className="absolute inset-x-0 top-12 bottom-0 bg-white/95 backdrop-blur-sm z-10 p-5 overflow-y-auto animate-in fade-in slide-in-from-bottom-4">
                                                <div className="flex items-center gap-2 mb-3 text-indigo-600 font-bold"><Icons.Sparkles className="w-4 h-4" /> <span>Âª∫ËÆÆËØùÈ¢òÔºö</span></div>
                                                <ul className="space-y-3">
                                                    {activeIcebreaker.questions.map((q, i) => (
                                                        <li key={i} className="text-sm bg-indigo-50 p-3 rounded-lg text-gray-700 border border-indigo-100">{q}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        )}

                                        <div className="flex flex-wrap gap-2">
                                            {mentor.tags.map((tag, i) => (
                                                <span key={i} className={`text-xs px-2.5 py-1 rounded-md font-bold flex items-center gap-1 ${style.tag}`}><Icons.Hash className="w-3 h-3 opacity-50" />{tag}</span>
                                            ))}
                                        </div>

                                        <p className="text-gray-600 text-sm leading-relaxed flex-1">{mentor.desc}</p>

                                        <div className={`p-3 rounded-xl border border-dashed ${style.border} ${style.bg}`}>
                                            <div className="flex items-center gap-1.5 mb-1">
                                                <Icons.Star className="w-3.5 h-3.5 text-yellow-500 fill-yellow-500" />
                                                <span className={`text-xs font-bold uppercase ${style.text}`}>ÈÄÇÂêàË∞ÅÔºü</span>
                                            </div>
                                            <p className="text-xs text-gray-700 font-medium">{mentor.match}</p>
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                    
                    {!isPrintMode && <div className="text-center mt-12 text-gray-400 text-sm pb-8">Project Mentorship Card Generator ¬© 2025 HKUST(GZ)</div>}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MentorCards />);
    </script>
</body>
</html>
